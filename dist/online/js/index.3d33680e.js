(function(e){function t(t){for(var i,o,s=t[0],c=t[1],l=t[2],u=0,f=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={index:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"03a2":function(e,t,n){"use strict";n("9a27")},1:function(e,t){},"10f4":function(e,t,n){},1712:function(e,t,n){"use strict";n("f7ee")},1979:function(e,t,n){"use strict";n("10f4")},"56d7":function(e,t,n){"use strict";n.r(t);n("a4d3"),n("e01a"),n("b636"),n("dc8d"),n("efe9"),n("d28b"),n("2a1b"),n("80e0"),n("6b9e"),n("197b"),n("2351"),n("8172"),n("944a"),n("81b8"),n("99af"),n("a874"),n("cb29"),n("4de4"),n("7db0"),n("c740"),n("0481"),n("5db7"),n("a630"),n("caad"),n("e260"),n("a15b"),n("d81d"),n("5ded"),n("fb6a"),n("4e82"),n("f785"),n("a434"),n("4069"),n("73d9"),n("c19f"),n("82da"),n("ace4"),n("efec"),n("b56e"),n("b0c0"),n("0c47"),n("4ec9"),n("5327"),n("79a8"),n("9ff9"),n("3ea3"),n("40d9"),n("ff9c"),n("0ac8"),n("f664"),n("4057"),n("bc01"),n("6b93"),n("ca21"),n("90d7"),n("2af1"),n("0261"),n("7898"),n("23dc"),n("b65f"),n("a9e3"),n("35b3"),n("f00c"),n("8ba4"),n("9129"),n("583b"),n("aff5"),n("e6e1"),n("c35a"),n("25eb"),n("b680"),n("cca6"),n("12a8"),n("e71b"),n("4fad"),n("dca8"),n("c1f9"),n("e439"),n("dbb4"),n("7039"),n("3410"),n("2b19"),n("c906"),n("e21d"),n("e43e"),n("b64b"),n("bf96"),n("5bf7"),n("cee8"),n("af93"),n("131a"),n("d3b7"),n("07ac"),n("e6cf"),n("a79d"),n("a6fd"),n("4ae1"),n("3f3a"),n("ac16"),n("5d41"),n("9e4a"),n("7f78"),n("c760"),n("db96"),n("1bf2"),n("d6dd"),n("7ed3"),n("8b9a"),n("4d63"),n("ac1f"),n("5377"),n("25f0"),n("6062"),n("f5b2"),n("8a79"),n("f6d6"),n("2532"),n("3ca3"),n("466d"),n("843c"),n("4d90"),n("d80f"),n("38cf"),n("5319"),n("841c"),n("1276"),n("2ca0"),n("498a"),n("1e25"),n("eee7"),n("18a5"),n("1393"),n("04d3"),n("cc71"),n("c7cd"),n("9767"),n("1913"),n("c5d0"),n("9911"),n("c96a"),n("2315"),n("4c53"),n("664f"),n("cfc3"),n("4a9b"),n("fd87"),n("8b09"),n("143c"),n("5cc6"),n("8a59"),n("84c3"),n("fb2c"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("20bf"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ec97"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("10d1"),n("1fe2"),n("159b"),n("ddb0"),n("130f"),n("9f96"),n("2b3d"),n("bf19"),n("9861");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},a=[],o=n("2877"),s={},c=Object(o["a"])(s,r,a,!1,null,null,null),l=c.exports,d=n("8c4f"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wsFlv"},[e.paramCheckedOk?n("div",[[n("ws-flv-player",{style:{width:e.width+"px",height:e.height+"px"},attrs:{wsUri:e.wsUri,rtspUrl:e.hikCamera.getRtspUrl(),videoObjectFit:e.videoObjectFit}})]],2):n("div",{staticClass:"empty",style:{width:e.width+"px",height:e.height+"px"}},[e._v("参数错误")])])},f=[];function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}var m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8e3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"main",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"admin",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Admin123",c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;h(this,e),this.channel=t,this.username=o,this.password=s,this.name=n,this.ipAddress=i,this.devChannel=c,this.port=r,this.protocol="HIKVISION",this.videoType="h264",this.streamType=a}return v(e,[{key:"getRtspUrl",value:function(){var e=this.username,t=this.password,n=this.channel,i=this.ipAddress,r=this.port,a=this.videoType,o=this.streamType;return"rtsp://".concat(e,":").concat(t,"@").concat(i,":").concat(r,"/").concat(a,"/ch").concat(n,"/").concat(o,"/av_stream")}},{key:"getNvrTracksUrl",value:function(e,t){var n=this.username,i=this.password,r=this.channel,a=this.ipAddress,o=this.port;return"rtsp://".concat(n,":").concat(i,"@").concat(a,":").concat(o,"/Streaming/tracks/").concat(r,"01?starttime=").concat(e,"&endtime=").concat(t)}}]),e}(),b=m,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("video",{ref:"video",staticClass:"player",style:{objectFit:e.videoObjectFit,width:"480px",height:"320px"},attrs:{autoplay:"",muted:""},domProps:{muted:!0}})},g=[],w=n("fc78"),P=n.n(w),_=n("6821"),x=n.n(_),O=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)},S=function(){return"undefined"!==typeof window&&"undefined"!==typeof window.document},E=function(){return S&&O()},k={name:"ws-flv-player",props:{wsUri:{type:String,required:!0},rtspUrl:{type:String,required:!0},videoObjectFit:{type:String,default:"fill"}},data:function(){return{flvPlayer:null,lastTimeStamp:0,currTimeStamp:0}},mounted:function(){var e=this;console.log("flv player"),this.$nextTick((function(){e.createVideo()}))},beforeDestroy:function(){document.removeEventListener("visibilitychange",this.pageHiddenHandler,!1),this.flvPlayer&&this.flvPlayer.destroy()},methods:{createVideo:function(){if(P.a.isSupported()){var e=this.$refs.video,t=this.wsUri,n=this.rtspUrl,i=x()(n);this.flvPlayer=P.a.createPlayer({type:"flv",enableWorker:!E,stashInitialSize:128,enableStashBuffer:!1,isLive:!0,hasAudio:!1,hasVideo:!0,url:"".concat(t,"/rtsp/").concat(i,"/?url=").concat(n)}),this.flvPlayer.attachMediaElement(e);try{this.flvPlayer.load(),this.flvPlayer.play()}catch(r){console.log(r)}document.addEventListener("visibilitychange",this.pageHiddenHandler,!1)}},pageHiddenHandler:function(e){if(this.lastTimeStamp=e.timeStamp,"visible"===document.visibilityState){var t=this.$refs.video,n=t.buffered;n&&n.length>0&&(t.currentTime=n.end(0)-.5)}}}},j=k,A=(n("1979"),Object(o["a"])(j,y,g,!1,null,"046c5cce",null)),C=A.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.source?n("div",{staticClass:"video",style:{overflow:"hidden"}},[n("object",{style:{objectFit:e.videoObjectFit},attrs:{type:"application/x-vlc-plugin",id:"vlc",events:"true",classid:"clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921",hspace:"0",vspace:"0",width:"100%",height:"100%"}},[n("param",{attrs:{name:"mrl",value:e.source}}),n("param",{attrs:{name:"volume",value:"0"}}),n("param",{attrs:{name:"autostart",value:"true"}}),n("param",{attrs:{name:"loop",value:"false"}}),n("param",{attrs:{name:"controls",value:"false"}}),n("param",{attrs:{name:"fullscreen",value:"false"}})])]):e._e()},F=[],I={name:"vlc-player",props:{rtspUrl:{type:String,required:!0},videoObjectFit:{type:String,default:"fill"}},watch:{rtspUrl:function(e,t){this.source=e}},data:function(){return{source:void 0,bv:void 0}},mounted:function(){console.log("vlc-player"),this.source=this.rtspUrl}},T=I,$=(n("03a2"),Object(o["a"])(T,U,F,!1,null,"0d6c3d71",null)),M=$.exports,V={name:"EndPoint",components:{"ws-flv-player":C,"vlc-player":M},data:function(){return{hikCamera:void 0,videoObjectFit:"fill",width:320,height:180}},computed:{isIE:E,paramCheckedOk:function(){var e;return console.log(this.hikCamera,"<<<<hik"),this.hikCamera&&(null===(e=this.hikCamera)||void 0===e?void 0:e.channel)>0&&this.hikCamera.ipAddress&&this.hikCamera.port>0},wsUri:function(){var e=this.$qsParse(window.location.href.split("?")[1]),t=Object({NODE_ENV:"production",VUE_APP_ENV_MODE:"online",VUE_APP_KMS_URI:"ws://180.76.134.252:8888/kurento",VUE_APP_FFMPEG_URI:"ws://172.31.129.182:8889",BASE_URL:""}),n=(t.VUE_APP_FFMPEG_URI,t.VUE_APP_KMS_URI),i=window.location.host,r="ws://".concat(i);return"webrtc"===(null===e||void 0===e?void 0:e.mode)?n:r}},mounted:function(){var e=this.$qsParse(window.location.href.split("?")[1]);this.width=(null===e||void 0===e?void 0:e.width)||320,this.height=(null===e||void 0===e?void 0:e.height)||180,this.videoObjectFit=(null===e||void 0===e?void 0:e.fit)||"fill";var t=e.channel,n=void 0===t?-1:t,i=e.name,r=void 0===i?"":i,a=e.ipAddress,o=void 0===a?"123.160.10.227":a,s=e.port,c=void 0===s?524:s,l=e.streamType,d=void 0===l?"sub":l,u=e.username,f=void 0===u?"admin":u,h=e.password,p=void 0===h?"Admin123":h,v=e.devChannel,m=void 0===v?1:v;this.hikCamera=new b(n,r,o,c,d,f,p,m),console.log(this.hikCamera.getRtspUrl(),"<hikCamera")}},q=V,N=(n("9929"),Object(o["a"])(q,u,f,!1,null,"26f6855c",null)),H=N.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"font-size":"0%"}},[e._l(e.list,(function(e,t){return[n("NginxFlvPlayer",{key:t,style:{border:"solid 1px #ccc",backgroundColor:"black",width:"480px",height:"270px"},attrs:{domKey:t,liveIpAddr:"180.76.134.252",livePort:"9938",rtmpPort:"9909",liveApp:"live",liveStream:e}})]}))],2)},D=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("video",{style:{objectFit:e.videoObjectFit},attrs:{autoplay:"",id:"video_"+e.domKey,muted:""},domProps:{muted:!0}})},K=[],L={name:"nginx-flv-player",props:{domKey:{type:[Number,String],required:!0},liveProtocol:{type:String,default:"http"},liveIpAddr:{type:String,required:!0},livePort:{type:[Number,String],required:!0},rtmpPort:{type:[Number,String],required:!0},liveApp:{type:[Number,String],required:!0},liveStream:{type:[String,Number],required:!0},videoObjectFit:{type:String,default:"fill"}},data:function(){return{flvPlayer:null}},mounted:function(){var e=this;this.$nextTick((function(){e.createVideo()}))},beforeDestroy:function(){this.destroy()},methods:{load:function(){this.flvPlayer&&this.flvPlayer.load()},play:function(){this.flvPlayer&&this.flvPlayer.play()},pause:function(){this.flvPlayer&&this.flvPlayer.destroy()},destroy:function(){this.flvPlayer&&this.flvPlayer.destroy()},createVideo:function(){if(P.a.isSupported()){var e=this.domKey,t=this.liveProtocol,n=this.liveIpAddr,i=this.livePort,r=this.rtmpPort,a=this.liveApp,o=this.liveStream,s=document.getElementById("video_".concat(e));this.flvPlayer=P.a.createPlayer({type:"flv",enableWorker:!0,isLive:!0,hasAudio:!1,hasVideo:!0,stashInitialSize:128,enableStashBuffer:!1,url:"".concat(t,"://").concat(n,":").concat(i,"/").concat(a,"?port=").concat(r,"&app=").concat(a,"&stream=").concat(o)}),this.flvPlayer.attachMediaElement(s),this.flvPlayer.load(),this.flvPlayer.play()}}}},z=L,W=(n("1712"),Object(o["a"])(z,B,K,!1,null,"537be3a6",null)),G=W.exports,J={components:{NginxFlvPlayer:G},data:function(){return{list:[101,102,103]}},mounted:function(){},methods:{}},Q=J,X=Object(o["a"])(Q,R,D,!1,null,null,null),Y=X.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("div",[e._v("flv测试")]),e._l(e.cameras,(function(e,t){return[n("iframe",{key:t,ref:"iframe"+t,refInFor:!0,staticStyle:{border:"solid 1px #ccc",background:"'black'",margin:"0",float:"left",width:"320px",height:"180px"},attrs:{frameboder:"0",src:"/?channel="+e.channel+"&ipAddress="+e.ipAddress+"&port="+e.port+"&streamType=sub&width=320&height=180"}})]}))],2)])},ee=[],te={data:function(){return{mode:"flv",cameras:[]}},mounted:function(){this.cameras=[{channel:1,ipAddress:"123.160.10.227",port:524}]},methods:{handleReload:function(e){for(var t in this.$refs)this.$refs[t][0].contentWindow.location.reload()},getRandomArrayElements:function(e,t){var n,i,r=e.slice(0),a=e.length,o=a-t;while(a-- >o)i=Math.floor((a+1)*Math.random()),n=r[i],r[i]=r[a],r[a]=n;return r.slice(o)}}},ne=te,ie=Object(o["a"])(ne,Z,ee,!1,null,null,null),re=ie.exports;i["a"].use(d["a"]);var ae=[{path:"/",name:"endpoint",component:H},{path:"/nginxFlvTest",name:"nginxFlvTest",component:Y},{path:"/test",name:"test",component:re}],oe=new d["a"]({mode:"history",base:"",routes:ae}),se=oe,ce={methods:{hashChangeHandler:function(){this.$router.push(window.location.hash.substring(1,window.location.hash.length))},isIE11:function(){return!!window.MSInputMethodContext&&!!document.documentMode}},mounted:function(){this.isIE11()&&window.addEventListener("hashchange",this.hashChangeHandler)},destroyed:function(){this.isIE11()&&window.removeEventListener("hashchange",this.hashChangeHandler)}},le=(n("96cf"),n("4328"));i["a"].prototype.$qsParse=le["parse"],i["a"].prototype.$qsStringify=le["stringify"],i["a"].config.productionTip=!1,new i["a"]({router:se,mixins:[ce],render:function(e){return e(l)}}).$mount("#app")},9929:function(e,t,n){"use strict";n("c016")},"9a27":function(e,t,n){},c016:function(e,t,n){},f7ee:function(e,t,n){}});