(function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],u=0,f=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(f.length)f.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],a=!0,s=1;s<i.length;s++){var l=i[s];0!==n[l]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=i[0]))}return e}var a={},n={index:0},r=[];function o(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=a,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(i,a,function(t){return e[t]}.bind(null,a));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},1:function(e,t){},1712:function(e,t,i){"use strict";i("f7ee")},"26f4":function(e,t,i){},"4d00":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("a4d3"),i("e01a"),i("b636"),i("dc8d"),i("efe9"),i("d28b"),i("2a1b"),i("80e0"),i("6b9e"),i("197b"),i("2351"),i("8172"),i("944a"),i("81b8"),i("99af"),i("a874"),i("cb29"),i("4de4"),i("7db0"),i("c740"),i("0481"),i("5db7"),i("a630"),i("caad"),i("e260"),i("a15b"),i("d81d"),i("5ded"),i("fb6a"),i("4e82"),i("f785"),i("a434"),i("4069"),i("73d9"),i("c19f"),i("82da"),i("ace4"),i("efec"),i("b56e"),i("b0c0"),i("0c47"),i("4ec9"),i("5327"),i("79a8"),i("9ff9"),i("3ea3"),i("40d9"),i("ff9c"),i("0ac8"),i("f664"),i("4057"),i("bc01"),i("6b93"),i("ca21"),i("90d7"),i("2af1"),i("0261"),i("7898"),i("23dc"),i("b65f"),i("a9e3"),i("35b3"),i("f00c"),i("8ba4"),i("9129"),i("583b"),i("aff5"),i("e6e1"),i("c35a"),i("25eb"),i("b680"),i("cca6"),i("12a8"),i("e71b"),i("4fad"),i("dca8"),i("c1f9"),i("e439"),i("dbb4"),i("7039"),i("3410"),i("2b19"),i("c906"),i("e21d"),i("e43e"),i("b64b"),i("bf96"),i("5bf7"),i("cee8"),i("af93"),i("131a"),i("d3b7"),i("07ac"),i("e6cf"),i("a79d"),i("a6fd"),i("4ae1"),i("3f3a"),i("ac16"),i("5d41"),i("9e4a"),i("7f78"),i("c760"),i("db96"),i("1bf2"),i("d6dd"),i("7ed3"),i("8b9a"),i("4d63"),i("ac1f"),i("5377"),i("25f0"),i("6062"),i("f5b2"),i("8a79"),i("f6d6"),i("2532"),i("3ca3"),i("466d"),i("843c"),i("4d90"),i("d80f"),i("38cf"),i("5319"),i("841c"),i("1276"),i("2ca0"),i("498a"),i("1e25"),i("eee7"),i("18a5"),i("1393"),i("04d3"),i("cc71"),i("c7cd"),i("9767"),i("1913"),i("c5d0"),i("9911"),i("c96a"),i("2315"),i("4c53"),i("664f"),i("cfc3"),i("4a9b"),i("fd87"),i("8b09"),i("143c"),i("5cc6"),i("8a59"),i("84c3"),i("fb2c"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("20bf"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ec97"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("10d1"),i("1fe2"),i("159b"),i("ddb0"),i("130f"),i("9f96"),i("2b3d"),i("bf19"),i("9861");var a=i("2b0e"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("router-view")},r=[],o=i("2877"),s={},l=Object(o["a"])(s,n,r,!1,null,null,null),c=l.exports,d=i("8c4f"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wsFlv"},[e.paramCheckedOk?i("div",[e.isIE?[i("vlc-player",{style:{width:e.width+"px",height:e.height+"px"},attrs:{rtspUrl:e.hikCamera.getRtspUrl(),videoObjectFit:e.videoObjectFit}})]:[i("ws-flv-player",{style:{width:e.width+"px",height:e.height+"px"},attrs:{wsUri:e.wsUri,rtspUrl:e.hikCamera.getRtspUrl(),videoObjectFit:e.videoObjectFit}})]],2):i("div",{staticClass:"empty",style:{width:e.width+"px",height:e.height+"px"}},[e._v("参数错误")])])},f=[];function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function v(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e}var m=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8e3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"main",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"admin",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Admin123",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;p(this,e),this.channel=t,this.username=o,this.password=s,this.name=i,this.ipAddress=a,this.devChannel=l,this.port=n,this.protocol="HIKVISION",this.videoType="h264",this.streamType=r}return v(e,[{key:"getRtspUrl",value:function(){var e=this.username,t=this.password,i=this.channel,a=this.ipAddress,n=this.port,r=this.videoType,o=this.streamType;return"rtsp://".concat(e,":").concat(t,"@").concat(a,":").concat(n,"/").concat(r,"/ch").concat(i,"/").concat(o,"/av_stream")}},{key:"getNvrTracksUrl",value:function(e,t){var i=this.username,a=this.password,n=this.channel,r=this.ipAddress,o=this.port;return"rtsp://".concat(i,":").concat(a,"@").concat(r,":").concat(o,"/Streaming/tracks/").concat(n,"01?starttime=").concat(e,"&endtime=").concat(t)}}]),e}(),y=m,b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("video",{ref:"video",staticClass:"player",style:{objectFit:e.videoObjectFit,width:"480px",height:"320px"},attrs:{autoplay:"",muted:""},domProps:{muted:!0}})},g=[],w=i("fc78"),x=i.n(w),P=i("6821"),O=i.n(P),S=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var i=e.indexOf("Trident/");if(i>0){var a=e.indexOf("rv:");return parseInt(e.substring(a+3,e.indexOf(".",a)),10)}var n=e.indexOf("Edge/");return n>0&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)},j=function(){return"undefined"!==typeof window&&"undefined"!==typeof window.document},E=function(){return j&&S()},k={name:"ws-flv-player",props:{wsUri:{type:String,required:!0},rtspUrl:{type:String,required:!0},videoObjectFit:{type:String,default:"fill"}},data:function(){return{flvPlayer:null,lastTimeStamp:0,currTimeStamp:0}},mounted:function(){console.log("flv player"),this.createVideo()},beforeDestroy:function(){document.removeEventListener("visibilitychange",this.pageHiddenHandler,!1),this.flvPlayer&&this.flvPlayer.destroy()},methods:{createVideo:function(){if(console.log(x.a.isSupported(),"<<<<<<<flvjs.isSupported"),x.a.isSupported()){var e=this.$refs.video,t=this.wsUri,i=this.rtspUrl,a=O()(i);this.flvPlayer=x.a.createPlayer({type:"flv",enableWorker:!E,stashInitialSize:128,enableStashBuffer:!1,isLive:!E,hasAudio:!1,hasVideo:!0,url:"".concat(t,"/rtsp/").concat(a,"/?url=").concat(i,"&type=flv")}),this.flvPlayer.attachMediaElement(e);try{this.flvPlayer.load(),this.flvPlayer.play()}catch(n){console.log(n)}document.addEventListener("visibilitychange",this.pageHiddenHandler,!1)}},pageHiddenHandler:function(e){if(this.lastTimeStamp=e.timeStamp,"visible"===document.visibilityState){var t=this.$refs.video,i=t.buffered;i&&i.length>0&&(t.currentTime=i.end(0)-.5)}}}},C=k,_=(i("94a3"),Object(o["a"])(C,b,g,!1,null,"f4a67c22",null)),A=_.exports,I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"video",style:{overflow:"hidden"},attrs:{id:"vlc-player-box"}},[i("object",{ref:"vlc",style:{objectFit:e.videoObjectFit},attrs:{id:"vlc",events:"True",type:"application/x-vlc-plugin",pluginspage:"http://www.videolan.org",codebase:"http://downloads.videolan.org/pub/videolan/vlc-webplugins/2.0.6/npapi-vlc-2.0.6.tar.xz",classid:"clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921",hspace:"0",vspace:"0",width:"100%",height:"100%",standby:"正在加载..."}},[i("param",{attrs:{name:"mrl"}}),i("param",{attrs:{name:"mute",value:"true"}}),i("param",{attrs:{name:"autoplay",value:"true"}}),i("param",{attrs:{name:"loop",value:"false"}}),i("param",{attrs:{name:"controls",value:"false"}}),i("param",{attrs:{name:"fullscreen",value:"false"}}),i("param",{attrs:{name:"bgcolor",value:"#000000"}}),i("embed",{attrs:{id:"vlcEmb",pluginspage:"http://www.videolan.org",type:"application/x-vlc-plugin",version:"VideoLAN.VLCPlugin.2",autoplay:"true",loop:"false",width:"100%",height:"100%",text:"正在加载..."}})])])},T=[],F={name:"vlc-player",props:{rtspUrl:{type:String,required:!0},videoObjectFit:{type:String,default:"fill"}},watch:{rtspUrl:function(e,t){this.source=e}},data:function(){return{source:void 0,timer:void 0}},computed:{isIE:E},mounted:function(){console.log("vlc-player"),this.source=this.rtspUrl,this.showVideo()},methods:{showVideo:function(){var e=this.$refs.vlc;if(void 0!==e&&null!==e){e.playlist.clear(),console.log("add source to playlist.");var t=new Array(":rtsp-tcp"),i=e.playlist.add(this.source,null,t);e.playlist.playItem(i),e.playlist.play();var a=document.body.offsetWidth;a=a%2===0?a+1:a-1,document.getElementsByTagName("body")[0].style.width=a+"px"}},showPlayer:function(e,t){var i='<object id="vlc"';this.isIE?i+=' classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921"':i+=' type="application/x-vlc-plugin"',i+=' width="700" height="400">',i+="<param name='mrl' value='"+t+"' />",i+="<param name='autoplay' value='true' />",i+="<param name='mute' value='true' />",i+="<param name='loop' value='false' />",i+="<param name='fullscreen' value='false' />",i+="</object>",document.getElementById(e).innerHTML=i}}},$=F,U=(i("9b73"),Object(o["a"])($,I,T,!1,null,"514531f5",null)),M=U.exports,q={name:"EndPoint",components:{"ws-flv-player":A,"vlc-player":M},data:function(){return{playerType:"flv",hikCamera:void 0,videoObjectFit:"fill",width:320,height:180}},computed:{isIE:E,paramCheckedOk:function(){return this.hikCamera&&this.hikCamera.ipAddress&&this.hikCamera.port>0},wsUri:function(){var e=window.location.host,t="ws://".concat(e);return t}},mounted:function(){var e=this.$qsParse(window.location.href.split("?")[1]),t=e.mode,i=void 0===t?"flv":t;this.playerType=i,this.width=(null===e||void 0===e?void 0:e.width)||320,this.height=(null===e||void 0===e?void 0:e.height)||180,this.videoObjectFit=(null===e||void 0===e?void 0:e.fit)||"fill";var a=e.channel,n=void 0===a?1:a,r=e.name,o=void 0===r?"":r,s=e.ipAddress,l=void 0===s?"123.160.10.227":s,c=e.port,d=void 0===c?524:c,u=e.streamType,f=void 0===u?"sub":u,p=e.username,h=void 0===p?"admin":p,v=e.password,m=void 0===v?"Admin123":v,b=e.devChannel,g=void 0===b?1:b;this.hikCamera=new y(n,o,l,d,f,h,m,g),console.log(JSON.stringify(this.hikCamera),"<hikCamera"),console.log(this.hikCamera.getRtspUrl(),"<hikCamera")}},N=q,B=(i("59c3"),Object(o["a"])(N,u,f,!1,null,"94d5e3b6",null)),H=B.exports,V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"font-size":"0%"}},[e._l(e.list,(function(e,t){return[i("NginxFlvPlayer",{key:t,style:{border:"solid 1px #ccc",backgroundColor:"black",width:"480px",height:"270px"},attrs:{domKey:t,liveIpAddr:"180.76.134.252",livePort:"9938",rtmpPort:"9909",liveApp:"live",liveStream:e}})]}))],2)},D=[],L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("video",{style:{objectFit:e.videoObjectFit},attrs:{autoplay:"",id:"video_"+e.domKey,muted:""},domProps:{muted:!0}})},R=[],K={name:"nginx-flv-player",props:{domKey:{type:[Number,String],required:!0},liveProtocol:{type:String,default:"http"},liveIpAddr:{type:String,required:!0},livePort:{type:[Number,String],required:!0},rtmpPort:{type:[Number,String],required:!0},liveApp:{type:[Number,String],required:!0},liveStream:{type:[String,Number],required:!0},videoObjectFit:{type:String,default:"fill"}},data:function(){return{flvPlayer:null}},mounted:function(){var e=this;this.$nextTick((function(){e.createVideo()}))},beforeDestroy:function(){this.destroy()},methods:{load:function(){this.flvPlayer&&this.flvPlayer.load()},play:function(){this.flvPlayer&&this.flvPlayer.play()},pause:function(){this.flvPlayer&&this.flvPlayer.destroy()},destroy:function(){this.flvPlayer&&this.flvPlayer.destroy()},createVideo:function(){if(x.a.isSupported()){var e=this.domKey,t=this.liveProtocol,i=this.liveIpAddr,a=this.livePort,n=this.rtmpPort,r=this.liveApp,o=this.liveStream,s=document.getElementById("video_".concat(e));this.flvPlayer=x.a.createPlayer({type:"flv",enableWorker:!0,isLive:!0,hasAudio:!1,hasVideo:!0,stashInitialSize:128,enableStashBuffer:!1,url:"".concat(t,"://").concat(i,":").concat(a,"/").concat(r,"?port=").concat(n,"&app=").concat(r,"&stream=").concat(o)}),this.flvPlayer.attachMediaElement(s),this.flvPlayer.load(),this.flvPlayer.play()}}}},z=K,W=(i("1712"),Object(o["a"])(z,L,R,!1,null,"537be3a6",null)),J=W.exports,G={components:{NginxFlvPlayer:J},data:function(){return{list:[101,102,103]}},mounted:function(){},methods:{}},Q=G,X=Object(o["a"])(Q,V,D,!1,null,null,null),Y=X.exports,Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",[i("div",[e._v("flv测试")]),i("div",{staticClass:"row"},[e._l(e.cameras,(function(t,a){return[i("div",{key:a,staticClass:"video-box"},[i("iframe",{ref:"iframe"+a,refInFor:!0,staticStyle:{border:"solid 1px #ccc",background:"'black'",margin:"0",float:"left",width:"320px",height:"180px"},attrs:{frameboder:"0",src:"/?mode="+t.mode+"&channel="+t.channel+"&ipAddress="+t.ipAddress+"&port="+t.port+"&streamType=sub&width=320&height=180"}}),i("div",{staticClass:"video-tag"},[e._v(e._s(t.mode))])])]}))],2)])])},ee=[],te={data:function(){return{mode:"flv",cameras:[]}},mounted:function(){this.cameras=[{mode:"flv",channel:1,ipAddress:"123.160.10.227",port:524},{mode:"vlc",channel:1,ipAddress:"123.160.10.227",port:524},{mode:"jsmpeg",channel:1,ipAddress:"123.160.10.227",port:524}]},methods:{handleReload:function(e){for(var t in this.$refs)this.$refs[t][0].contentWindow.location.reload()},getRandomArrayElements:function(e,t){var i,a,n=e.slice(0),r=e.length,o=r-t;while(r-- >o)a=Math.floor((r+1)*Math.random()),i=n[a],n[a]=n[r],n[r]=i;return n.slice(o)}}},ie=te,ae=(i("f872"),Object(o["a"])(ie,Z,ee,!1,null,"1e16d4d3",null)),ne=ae.exports;a["a"].use(d["a"]);var re=[{path:"/",name:"endpoint",component:H},{path:"/nginxFlvTest",name:"nginxFlvTest",component:Y},{path:"/test",name:"test",component:ne}],oe=new d["a"]({mode:"history",base:"",routes:re}),se=oe,le={methods:{hashChangeHandler:function(){this.$router.push(window.location.hash.substring(1,window.location.hash.length))},isIE11:function(){return!!window.MSInputMethodContext&&!!document.documentMode}},mounted:function(){this.isIE11()&&window.addEventListener("hashchange",this.hashChangeHandler)},destroyed:function(){this.isIE11()&&window.removeEventListener("hashchange",this.hashChangeHandler)}},ce=(i("96cf"),i("4328"));a["a"].prototype.$qsParse=ce["parse"],a["a"].prototype.$qsStringify=ce["stringify"],a["a"].config.productionTip=!1,new a["a"]({router:se,mixins:[le],render:function(e){return e(c)}}).$mount("#app")},"59c3":function(e,t,i){"use strict";i("8945")},"5ef7":function(e,t,i){},8945:function(e,t,i){},"94a3":function(e,t,i){"use strict";i("5ef7")},"9b73":function(e,t,i){"use strict";i("4d00")},f7ee:function(e,t,i){},f872:function(e,t,i){"use strict";i("26f4")}});